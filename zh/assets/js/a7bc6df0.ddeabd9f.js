"use strict";(self.webpackChunk_project_hami_website=self.webpackChunk_project_hami_website||[]).push([[1152],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(r),d=o,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||a;return r?n.createElement(g,l(l({ref:t},u),{},{components:r})):n.createElement(g,l({ref:t},u))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,l=new Array(a);l[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var c=2;c<a;c++)l[c]=r[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},8713:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var n=r(7462),o=(r(7294),r(3905));const a={title:"Troubleshooting"},l=void 0,i={unversionedId:"troubleshooting/troubleshooting",id:"troubleshooting/troubleshooting",title:"Troubleshooting",description:"I can't access some resources when installing Karmada",source:"@site/docs/troubleshooting/troubleshooting.md",sourceDirName:"troubleshooting",slug:"/troubleshooting/",permalink:"/zh/docs/next/troubleshooting/",draft:!1,editUrl:"https://github.com/karmada-io/website/edit/main/docs/troubleshooting/troubleshooting.md",tags:[],version:"current",lastUpdatedBy:"limengxuan",lastUpdatedAt:1713177637,formattedLastUpdatedAt:"2024\u5e744\u670815\u65e5",frontMatter:{title:"Troubleshooting"},sidebar:"docs",previous:{title:"How to manage lifted codes",permalink:"/zh/docs/next/contributor/lifted"},next:{title:"FAQ(Frequently Asked Questions)",permalink:"/zh/docs/next/faq/"}},s={},c=[{value:"I can&#39;t access some resources when installing Karmada",id:"i-cant-access-some-resources-when-installing-karmada",level:2},{value:"Member cluster healthy checking does not work",id:"member-cluster-healthy-checking-does-not-work",level:2}],u={toc:c};function m(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"i-cant-access-some-resources-when-installing-karmada"},"I can't access some resources when installing Karmada"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Pull images from Google Container Registry (k8s.gcr.io)."),(0,o.kt)("p",{parentName:"li"},"You can run the following commands to change the image registry in Mainland China."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"sed -i'' -e \"s#k8s.gcr.io#registry.aliyuncs.com/google_containers#g\" artifacts/deploy/karmada-etcd.yaml\nsed -i'' -e \"s#k8s.gcr.io#registry.aliyuncs.com/google_containers#g\" artifacts/deploy/karmada-apiserver.yaml\nsed -i'' -e \"s#k8s.gcr.io#registry.aliyuncs.com/google_containers#g\" artifacts/deploy/kube-controller-manager.yaml\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Download the Golang package in Mainland China and run the following command before installation."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"export GOPROXY=https://goproxy.cn\n")))),(0,o.kt)("h2",{id:"member-cluster-healthy-checking-does-not-work"},"Member cluster healthy checking does not work"),(0,o.kt)("p",null,"If your environment is similar to the following."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"After registering member cluster to karmada with push mode, and using ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get cluster"),", found the cluster status was ready.\nThen, by opening the firewall between the member cluster and karmada, after waiting for a long time, the cluster status was also ready, not change to fail.")),(0,o.kt)("p",null,"The cause of the problem was that the firewall did not close the already existing TCP connection between the member cluster and karmada."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"login to the node where the member cluster apiserver is located"),(0,o.kt)("li",{parentName:"ul"},"use the ",(0,o.kt)("inlineCode",{parentName:"li"},"tcpkill")," command to close the tcp connection. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# ens192 is the name of the network-card used by the member cluster to communicate with karmada.\ntcpkill -9  -i ens192 src host ${KARMADA_APISERVER_IP} and dst port ${MEMBER_CLUTER_APISERVER_IP}\n")))}m.isMDXComponent=!0}}]);