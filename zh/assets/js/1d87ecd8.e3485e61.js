"use strict";(self.webpackChunk_project_hami_website=self.webpackChunk_project_hami_website||[]).push([[648],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=i.createContext({}),c=function(e){var t=i.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=c(e.components);return i.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,g=m["".concat(u,".").concat(d)]||m[d]||p[d]||a;return n?i.createElement(g,o(o({ref:t},s),{},{components:n})):i.createElement(g,o({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2040:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=n(7462),r=(n(7294),n(3905));const a={title:"Configuration"},o=void 0,l={unversionedId:"userguide/configure",id:"version-v1.3.0/userguide/configure",title:"Configuration",description:"Global configuration",source:"@site/versioned_docs/version-v1.3.0/userguide/configure.md",sourceDirName:"userguide",slug:"/userguide/configure",permalink:"/zh/docs/userguide/configure",draft:!1,editUrl:"https://github.com/karmada-io/website/edit/main/docs/userguide/configure.md",tags:[],version:"v1.3.0",lastUpdatedBy:"limengxuan",lastUpdatedAt:1713177637,formattedLastUpdatedAt:"2024\u5e744\u670815\u65e5",frontMatter:{title:"Configuration"},sidebar:"version-v1.3.0/docs",previous:{title:"Uninstall",permalink:"/zh/docs/installation/uninstall"},next:{title:"support-devices",permalink:"/zh/docs/userguide/support-devices"}},u={},c=[{value:"Global configuration",id:"global-configuration",level:2},{value:"Container configuration",id:"container-configuration",level:2}],s={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"global-configuration"},"Global configuration"),(0,r.kt)("p",null,"These global configurations apply for all tasks. You can customize your HAMi installation by setting the following parameters using ",(0,r.kt)("inlineCode",{parentName:"p"},"-set"),", for example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"helm install vgpu-charts/vgpu vgpu --set devicePlugin.deviceMemoryScaling=5 ...\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"devicePlugin.service.schedulerPort:"),"\nInteger type, by default: 31998, scheduler webhook service nodePort."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"devicePlugin.deviceMemoryScaling:"),"\nFloat type, by default: 1. The ratio for NVIDIA device memory scaling, can be greater than 1 (enable virtual device memory, experimental feature). For NVIDIA GPU with ",(0,r.kt)("em",{parentName:"li"},"M")," memory, if we set ",(0,r.kt)("inlineCode",{parentName:"li"},"devicePlugin.deviceMemoryScaling")," argument to ",(0,r.kt)("em",{parentName:"li"},"S"),", vGPUs splitted by this GPU will totally get ",(0,r.kt)("inlineCode",{parentName:"li"},"S * M")," memory in Kubernetes with our device plugin."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"devicePlugin.deviceSplitCount:"),"\nInteger type, by default: equals 10. Maximum tasks assigned to a simple GPU device."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"devicePlugin.migstrategy:"),'\nString type, "none" for ignoring MIG features or "mixed" for allocating MIG device by seperate resources. Default "none"'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"devicePlugin.disablecorelimit:"),'\nString type, "true" for disable core limit, "false" for enable core limit, default: false'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"scheduler.defaultMem:"),"\nInteger type, by default: 5000. The default device memory of the current task, in MB"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"scheduler.defaultCores:"),"\nInteger type, by default: equals 0. Percentage of GPU cores reserved for the current task. If assigned to 0, it may fit in any GPU with enough device memory. If assigned to 100, it will use an entire GPU card exclusively."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"scheduler.defaultGPUNum:"),"\nInteger type, by default: equals 1, if configuration value is 0, then the configuration value will not take effect and will be filtered. when a user does not set nvidia.com/gpu this key in pod resource, webhook should check nvidia.com/gpumem\u3001resource-mem-percentage\u3001nvidia.com/gpucores this three key, anyone a key having value, webhook should add nvidia.com/gpu key and this default value to resources limits map."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resourceName:"),'\nString type, vgpu number resource name, default: "nvidia.com/gpu"'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resourceMem:"),'\nString type, vgpu memory size resource name, default: "nvidia.com/gpumem"'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resourceMemPercentage:"),'\nString type, vgpu memory fraction resource name, default: "nvidia.com/gpumem-percentage" '),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resourceCores:"),'\nString type, vgpu cores resource name, default: "nvidia.com/cores"'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"resourcePriority:"),'\nString type, vgpu task priority name, default: "nvidia.com/priority"')),(0,r.kt)("h2",{id:"container-configuration"},"Container configuration"),(0,r.kt)("p",null,"These container configurations are local to container, you can set the following configuration in container environment variables:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"GPU_CORE_UTILIZATION_POLICY:"),'\nString type, "default", "force", "disable"\n"default" means the dafault utilization policy\n"force" means the container will always limit the core utilization below "nvidia.com/gpucores"\n"disable" means the container will ignore the utilization limitation set by "nvidia.com/gpucores" during task execution')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"ACTIVE_OOM_KILLER:"),'\nString type, "true","false"\n"true" means the task may be killed if exceeds the limitation set by "nvidia.com/gpumem" or "nvidia.com/gpumemory"\n"false" means the task will not be killed even it exceeds the limitation.'))))}p.isMDXComponent=!0}}]);